#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import AppVocab dictionary.AppVocab

<Image>:
    size_hint_y: 1
    anim_delay: 0.1

<Label>
    canvas.before:
        Color:
            rgba: get_color_from_hex('#ffffff')
        Rectangle:
            pos: self.pos[0], self.pos[1]+sp(25)/2
            size: self.size[0], self.size[1]-sp(25)
        Rectangle:
            pos: self.pos[0]+sp(25)/2, self.pos[1]
            size: self.size[0]-sp(25), self.size[1]
        Ellipse:
            size: sp(25), sp(25)
            pos: self.pos[0], self.pos[1]
        Ellipse:
            size: sp(25), sp(25)
            pos: self.pos[0], self.pos[1]+self.height-sp(25)
        Ellipse:
            size: sp(25), sp(25)
            pos: self.pos[0]+self.width-sp(25), self.pos[1]
        Ellipse:
            size: sp(25), sp(25)
            pos: self.pos[0]+self.width-sp(25), self.pos[1]+self.height-sp(25)
    padding: 10, 10
    size_hint_y: None
    text_size: self.size
    line_height: 1.5
    markup: True
    halign: 'left'
    valign: 'top'
    color: get_color_from_hex('#000000')

<TenFingersPlay>
    cols: 1
    rows: 3
    padding: 15, 15, 15, 15
    spacing: 10, 10

    upcoming_text: upcoming_text
    input_text: input_text
    game_since: game_since
    BoxLayout:
        Label:
            id: game_since
            name: 'game_since'
            height: sp(40)
            font_size: sp(20)
            halign: 'right'

    BoxLayout:
        Label:
            id: upcoming_text
            height: sp(80)
            font_size: sp(20)
            markup: True
            halign: 'left'

    BoxLayout:
        padding: 20, 20, 20 , 20
        TenFingerInputText:
            canvas.after:
                Color:
                    rgba: get_color_from_hex('#ffffff')
                Rectangle:
                    pos: self.pos[0]-sp(10)/2, self.pos[1]+sp(10)/2
                    size: sp(10), sp(30)
                Rectangle:
                    pos: self.pos[0]+self.width-sp(10)/2, self.pos[1]+sp(10)/2
                    size: sp(10), sp(30)
                Ellipse:
                    size: sp(10), sp(10)
                    pos: self.pos[0]-sp(10)/2, self.pos[1]
                Ellipse:
                    size: sp(10), sp(10)
                    pos: self.pos[0]-sp(10)/2, self.pos[1]+self.height-sp(10)
                Ellipse:
                    size: sp(10), sp(10)
                    pos: self.pos[0]+self.width-sp(5), self.pos[1]
                Ellipse:
                    size: sp(10), sp(10)
                    pos: self.pos[0]+self.width-sp(5), self.pos[1]+self.height-sp(10)
            id: input_text
            text: ''
            size_hint_y: None
            padding: 10, 20, 20, 20
            height: sp(40)
            multiline: False
            foreground_color: 0, 0, 0, 1
            background_color: 1, 1, 1, 1
            cursor_color: get_color_from_hex('#000000')
            background_disabled_normal: ""
            background_normal: ""
            background_active: ""

<TenFingers>
    welcome: welcome
    play: play
    final: final

    Screen:
        id: welcome
        name: 'welcome'
        last_score: last_score
        best_score: best_score
        GridLayout:
            cols: 1
            rows: 2
            padding: 15, 15, 15, 15
            spacing: 10, 10
            GridLayout
                cols: 2
                rows: 1
                spacing: 50, 10
                GridLayout:
                    cols: 1
                    rows: 2
                    spacing: 0, -40
                    Label:
                        text: AppVocab('Last')
                    Label:
                        id: last_score
                        text: '{} wpm'.format(root.last_score())
                        height: sp(80)
                        font_size: sp(40)
                        halign: 'center'
                GridLayout:
                    cols: 1
                    rows: 2
                    spacing: 0, -40
                    Label:
                        text: AppVocab('Best')
                    Label:
                        id: best_score
                        text: '{} wpm'.format(root.best_score())
                        height: sp(80)
                        font_size: sp(40)
                        halign: 'center'
            Button:
                text: AppVocab('READY!')
                size_hint_y: None
                height: sp(80)
                font_size: sp(30)
                valign: 'middle'
                halign: 'center'
                on_press: root.switch_play_window()
                color: get_color_from_hex('#FFFFFF')

    Screen:
        id: play
        name: 'play'
        TenFingersPlay

    Screen:
        id: final
        name: 'final'
        GridLayout:
            rows: 2
            cols: 1
            padding: 15, 15, 15, 15
            spacing: 10, 10
            score: score
            Label:
                id: score
                height: sp(80)
                font_size: sp(50)
                valign: 'middle'
                halign: 'center'

            Button:
                text: AppVocab('AGAIN!')
                height: sp(80)
                font_size: sp(30)
                on_press: root.switch_play_window('right')
                color: get_color_from_hex('#FFFFFF')
                valign: 'middle'
                halign: 'center'
